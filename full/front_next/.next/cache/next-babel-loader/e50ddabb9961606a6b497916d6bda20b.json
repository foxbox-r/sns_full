{"ast":null,"code":"import shortId from \"shortid\";\nimport produce from \"immer\";\nimport faker from \"faker\";\nvar initialState = {\n  mainPosts: [],\n  imagePaths: [],\n  addPostDone: false,\n  addPostLoading: false,\n  addPostError: null,\n  loadPostDone: false,\n  loadPostLoading: false,\n  loadPostError: null,\n  hasMorePosts: true,\n  removePostDone: false,\n  removePostLoading: false,\n  removePostError: null,\n  addCommentDone: false,\n  addCommentLoading: false,\n  addCommentError: null,\n  likePostDone: false,\n  likePostLoading: false,\n  likePostError: null,\n  unLikePostDone: false,\n  unLikePostLoading: false,\n  unLikePostError: null,\n  uploadImagesDone: false,\n  uploadImagesLoading: false,\n  uploadImagesError: null,\n  retweetDone: false,\n  retweetLoading: false,\n  retweetError: null\n};\n\nvar getRandomImg = function getRandomImg() {\n  var arr = [];\n  var randomValue = Math.random() * 10 + 1;\n\n  for (var i = 0; i < randomValue; i++) {\n    arr.push({\n      src: faker.image.image()\n    });\n  }\n\n  return arr;\n};\n\nexport var generateDummyPost = function generateDummyPost(number) {\n  return Array(number).fill().map(function (v, i) {\n    return {\n      id: shortId.generate(),\n      User: {\n        id: shortId.generate(),\n        nickname: faker.name.findName()\n      },\n      content: faker.lorem.paragraph(),\n      Images: getRandomImg(),\n      Comments: [{\n        User: {\n          id: shortId.generate(),\n          nickname: faker.name.findName()\n        },\n        content: faker.lorem.sentence()\n      }]\n    };\n  });\n};\ninitialState.mainPosts = initialState.mainPosts.concat(generateDummyPost(0));\nexport var ADD_POST_REQUEST = \"postReducer/ADD_POST_REQUEST\";\nexport var ADD_POST_SUCCESS = \"postReducer/ADD_POST_SUCCESS\";\nexport var ADD_POST_ERROR = \"postReducer/ADD_POST_ERROR\";\nexport var REMOVE_POST_REQUEST = \"postReducer/REMOVE_POST_REQUEST\";\nexport var REMOVE_POST_SUCCESS = \"postReducer/REMOVE_POST_SUCCESS\";\nexport var REMOVE_POST_ERROR = \"postReducer/REMOVE_POST_ERROR\";\nexport var ADD_COMMENT_REQUEST = \"postReducer/ADD_COMMENT_REQUEST\";\nexport var ADD_COMMENT_SUCCESS = \"postReducer/ADD_COMMENT_SUCCESS\";\nexport var ADD_COMMENT_ERROR = \"postReducer/ADD_COMMENT_ERROR\";\nexport var LOAD_POST_REQUEST = \"postReducer/LOAD_POST_REQUEST\";\nexport var LOAD_POST_SUCCESS = \"postReducer/LOAD_POST_SUCCESS\";\nexport var LOAD_POST_ERROR = \"postReducer/LOAD_POST_ERROR\";\nexport var LIKE_POST_REQUEST = \"postReducer/LIKE_POST_REQUEST\";\nexport var LIKE_POST_SUCCESS = \"postReducer/LIKE_POST_SUCCESS\";\nexport var LIKE_POST_ERROR = \"postReducer/LIKE_POST_ERROR\";\nexport var UNLIKE_POST_REQUEST = \"postReducer/UNLIKE_POST_REQUEST\";\nexport var UNLIKE_POST_SUCCESS = \"postReducer/UNLIKE_POST_SUCCESS\";\nexport var UNLIKE_POST_ERROR = \"postReducer/UNLIKE_POST_ERROR\";\nexport var UPLOAD_IMAGES_REQUEST = \"postReducer/UPLOAD_IMAGES_REQUEST\";\nexport var UPLOAD_IMAGES_SUCCESS = \"postReducer/UPLOAD_IMAGES_SUCCESS\";\nexport var UPLOAD_IMAGES_ERROR = \"postReducer/UPLOAD_IMAGES_ERROR\";\nexport var REMOVE_IMAGE = \"postReducer/REMOVE_IMAGE\";\nexport var RETWEET_REQUEST = \"postReducer/RETWEET_REQUEST\";\nexport var RETWEET_SUCCESS = \"postReducer/RETWEET_SUCCESS\";\nexport var RETWEET_ERROR = \"postReducer/RETWEET_ERROR\";\nexport var addPostRequestAction = function addPostRequestAction(data) {\n  return {\n    //({postContent})\n    type: ADD_POST_REQUEST,\n    data: data\n  };\n};\nexport var removePostRequestAction = function removePostRequestAction(data) {\n  return {\n    //({id})\n    type: REMOVE_POST_REQUEST,\n    data: data\n  };\n};\nexport var addCommentRequestAction = function addCommentRequestAction(data) {\n  return {\n    //({postId,content,userId})\n    type: ADD_COMMENT_REQUEST,\n    data: data\n  };\n};\n\nvar dummyPost = function dummyPost(data) {\n  return {\n    //{id,postContent}\n    id: data.id,\n    content: data.postContent,\n    User: {\n      id: 1,\n      nickname: \"zero\"\n    },\n    Images: getRandomValue(imgs),\n    Comments: []\n  };\n};\n\nvar postReducer = function postReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  return produce(state, function (draft) {\n    switch (action.type) {\n      case ADD_POST_REQUEST:\n        draft.addPostLoading = true;\n        draft.addPostDone = false;\n        draft.addPostError = null;\n        break;\n\n      case ADD_POST_SUCCESS:\n        //data:addPostApi().data\n        draft.mainPosts.unshift(action.data);\n        draft.addPostLoading = false;\n        draft.addPostDone = true;\n        draft.imagePaths = [];\n        break;\n\n      case ADD_POST_ERROR:\n        draft.addPostLoading = false;\n        draft.addPostError = action.data;\n        break;\n\n      case REMOVE_POST_REQUEST:\n        draft.removePostLoading = true;\n        draft.removePostDone = false;\n        draft.removePostError = null;\n        break;\n\n      case REMOVE_POST_SUCCESS:\n        //data:{postId}\n        draft.mainPosts = draft.mainPosts.filter(function (post) {\n          return post.id !== action.data.postId;\n        });\n        draft.removePostLoading = false;\n        draft.removePostDone = true;\n        break;\n\n      case REMOVE_POST_ERROR:\n        draft.removePostLoading = false;\n        draft.removePostError = action.data;\n        break;\n\n      case ADD_COMMENT_REQUEST:\n        draft.addCommentLoading = true;\n        draft.addComentDone = false;\n        draft.addCommentError = null;\n        break;\n\n      case ADD_COMMENT_SUCCESS:\n        {\n          //data:addCommentApi().data\n          var post = draft.mainPosts.find(function (post) {\n            return post.id === action.data.PostId;\n          });\n          post.Comments.unshift(action.data);\n          draft.addCommentLoading = false;\n          draft.addCommentDone = true;\n          break;\n        }\n\n      case ADD_COMMENT_ERROR:\n        //{data:err}\n        draft.addCommentLoading = false;\n        draft.addCommentError = action.data;\n        break;\n\n      case LOAD_POST_REQUEST:\n        draft.loadPostLoading = true;\n        draft.loadPostDone = false;\n        draft.loadPostError = null;\n        break;\n\n      case LOAD_POST_SUCCESS:\n        //data:loadPostApi().data\n        draft.mainPosts = draft.mainPosts.concat(action.data);\n        draft.hasMorePosts = draft.mainPosts.length < 10;\n        draft.loadPostLoading = false;\n        draft.loadPostDone = true;\n        break;\n\n      case LOAD_POST_ERROR:\n        draft.loadPostLoading = false;\n        draft.loadPostError = action.data;\n        break;\n\n      case LIKE_POST_REQUEST:\n        draft.likePostLoading = true;\n        draft.likePostDone = false;\n        draft.likePostError = null;\n        break;\n\n      case LIKE_POST_SUCCESS:\n        {\n          //{data:{postId,UserId}}\n          console.log(\"=========\", draft.mainPosts);\n          draft.likePostLoading = false;\n          draft.likePostDone = true;\n\n          var _post = draft.mainPosts.find(function (post) {\n            return post.id === action.data.postId;\n          });\n\n          _post.Likers.push({\n            id: action.data.UserId\n          });\n\n          break;\n        }\n\n      case LIKE_POST_ERROR:\n        draft.likePostLoading = false;\n        draft.likePostError = action.data;\n        break;\n\n      case UNLIKE_POST_REQUEST:\n        draft.unLikePostLoading = true;\n        draft.unLikePostDone = false;\n        draft.unLikePostError = null;\n        break;\n\n      case UNLIKE_POST_SUCCESS:\n        {\n          //{data:{postId,UserId}}\n          draft.unLikePostLoading = false;\n          draft.unLikePostDone = true;\n\n          var _post2 = draft.mainPosts.find(function (post) {\n            return post.id === action.data.postId;\n          });\n\n          _post2.Likers = _post2.Likers.filter(function (user) {\n            return user.id !== action.data.UserId;\n          });\n          break;\n        }\n\n      case UNLIKE_POST_ERROR:\n        draft.unLikePostLoading = false;\n        draft.unLikePostError = action.data;\n        break;\n\n      case UPLOAD_IMAGES_REQUEST:\n        draft.upLoadLoading = true;\n        draft.upLoadDone = false;\n        draft.upLoadError = null;\n        break;\n\n      case UPLOAD_IMAGES_SUCCESS:\n        // {data:uploadImagesApi().data}\n        draft.imagePaths = action.data;\n        draft.upLoadLoading = false;\n        draft.upLoadDone = true;\n        break;\n\n      case UPLOAD_IMAGES_ERROR:\n        draft.upLoadLoading = false;\n        draft.upLoadError = action.data;\n        break;\n\n      case REMOVE_IMAGE:\n        // {data:index}\n        draft.imagePaths = draft.imagePaths.filter(function (v, i) {\n          return i !== action.data;\n        });\n        break;\n\n      case RETWEET_REQUEST:\n        draft.retweetLoading = true;\n        draft.retweetDone = false;\n        draft.retweetError = null;\n        break;\n\n      case RETWEET_SUCCESS:\n        // \n        draft.retweetLoading = false;\n        draft.retweetDone = true;\n        break;\n\n      case RETWEET_ERROR:\n        draft.retweetLoading = false;\n        draft.retweetError = action.data;\n        break;\n\n      default:\n        // return state;\n        break;\n    }\n  });\n};\n\nexport default postReducer;","map":{"version":3,"sources":["C:/WEB/full/front_next/reducers/postReducer.js"],"names":["shortId","produce","faker","initialState","mainPosts","imagePaths","addPostDone","addPostLoading","addPostError","loadPostDone","loadPostLoading","loadPostError","hasMorePosts","removePostDone","removePostLoading","removePostError","addCommentDone","addCommentLoading","addCommentError","likePostDone","likePostLoading","likePostError","unLikePostDone","unLikePostLoading","unLikePostError","uploadImagesDone","uploadImagesLoading","uploadImagesError","retweetDone","retweetLoading","retweetError","getRandomImg","arr","randomValue","Math","random","i","push","src","image","generateDummyPost","number","Array","fill","map","v","id","generate","User","nickname","name","findName","content","lorem","paragraph","Images","Comments","sentence","concat","ADD_POST_REQUEST","ADD_POST_SUCCESS","ADD_POST_ERROR","REMOVE_POST_REQUEST","REMOVE_POST_SUCCESS","REMOVE_POST_ERROR","ADD_COMMENT_REQUEST","ADD_COMMENT_SUCCESS","ADD_COMMENT_ERROR","LOAD_POST_REQUEST","LOAD_POST_SUCCESS","LOAD_POST_ERROR","LIKE_POST_REQUEST","LIKE_POST_SUCCESS","LIKE_POST_ERROR","UNLIKE_POST_REQUEST","UNLIKE_POST_SUCCESS","UNLIKE_POST_ERROR","UPLOAD_IMAGES_REQUEST","UPLOAD_IMAGES_SUCCESS","UPLOAD_IMAGES_ERROR","REMOVE_IMAGE","RETWEET_REQUEST","RETWEET_SUCCESS","RETWEET_ERROR","addPostRequestAction","data","type","removePostRequestAction","addCommentRequestAction","dummyPost","postContent","getRandomValue","imgs","postReducer","state","action","draft","unshift","filter","post","postId","addComentDone","find","PostId","length","console","log","Likers","UserId","user","upLoadLoading","upLoadDone","upLoadError"],"mappings":"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","sourcesContent":["import shortId from \"shortid\"\r\nimport produce from \"immer\"\r\nimport faker from \"faker\"\r\n\r\nconst initialState = {\r\n    mainPosts:[],\r\n    imagePaths:[],\r\n\r\n    addPostDone:false,\r\n    addPostLoading:false,\r\n    addPostError:null,\r\n\r\n    loadPostDone:false,\r\n    loadPostLoading:false,\r\n    loadPostError:null,\r\n    hasMorePosts:true,\r\n\r\n    removePostDone:false,\r\n    removePostLoading:false,\r\n    removePostError:null,\r\n\r\n    addCommentDone:false,\r\n    addCommentLoading:false,\r\n    addCommentError:null,\r\n\r\n    likePostDone:false,\r\n    likePostLoading:false,\r\n    likePostError:null,\r\n\r\n    unLikePostDone:false,\r\n    unLikePostLoading:false,\r\n    unLikePostError:null,\r\n\r\n    uploadImagesDone:false,\r\n    uploadImagesLoading:false,\r\n    uploadImagesError:null,\r\n\r\n    retweetDone:false,\r\n    retweetLoading:false,\r\n    retweetError:null,\r\n}\r\nconst getRandomImg = ()=>{\r\n    const arr = [];\r\n    const randomValue = Math.random()*10+1;\r\n    for(let i=0;i<randomValue;i++)\r\n        arr.push({\r\n            src:faker.image.image()\r\n        });\r\n    return arr;\r\n};\r\nexport const generateDummyPost = number => Array(number).fill().map((v,i)=>({\r\n    id:shortId.generate(),\r\n    User:{\r\n        id:shortId.generate(),\r\n        nickname:faker.name.findName(),\r\n    },\r\n    content:faker.lorem.paragraph(),\r\n    Images:getRandomImg(),\r\n    Comments:[{\r\n        User:{\r\n            id:shortId.generate(),\r\n            nickname:faker.name.findName()\r\n        },\r\n        content:faker.lorem.sentence(),\r\n    }],\r\n}));\r\n\r\ninitialState.mainPosts = initialState.mainPosts.concat(generateDummyPost(0))\r\n\r\nexport const ADD_POST_REQUEST = \"postReducer/ADD_POST_REQUEST\";\r\nexport const ADD_POST_SUCCESS = \"postReducer/ADD_POST_SUCCESS\";\r\nexport const ADD_POST_ERROR = \"postReducer/ADD_POST_ERROR\";\r\n\r\nexport const REMOVE_POST_REQUEST = \"postReducer/REMOVE_POST_REQUEST\";\r\nexport const REMOVE_POST_SUCCESS = \"postReducer/REMOVE_POST_SUCCESS\";\r\nexport const REMOVE_POST_ERROR = \"postReducer/REMOVE_POST_ERROR\";\r\n\r\nexport const ADD_COMMENT_REQUEST = \"postReducer/ADD_COMMENT_REQUEST\";\r\nexport const ADD_COMMENT_SUCCESS = \"postReducer/ADD_COMMENT_SUCCESS\";\r\nexport const ADD_COMMENT_ERROR = \"postReducer/ADD_COMMENT_ERROR\";\r\n\r\nexport const LOAD_POST_REQUEST = \"postReducer/LOAD_POST_REQUEST\";\r\nexport const LOAD_POST_SUCCESS = \"postReducer/LOAD_POST_SUCCESS\";\r\nexport const LOAD_POST_ERROR = \"postReducer/LOAD_POST_ERROR\";\r\n\r\nexport const LIKE_POST_REQUEST = \"postReducer/LIKE_POST_REQUEST\";\r\nexport const LIKE_POST_SUCCESS = \"postReducer/LIKE_POST_SUCCESS\";\r\nexport const LIKE_POST_ERROR = \"postReducer/LIKE_POST_ERROR\";\r\n\r\nexport const UNLIKE_POST_REQUEST = \"postReducer/UNLIKE_POST_REQUEST\";\r\nexport const UNLIKE_POST_SUCCESS = \"postReducer/UNLIKE_POST_SUCCESS\";\r\nexport const UNLIKE_POST_ERROR = \"postReducer/UNLIKE_POST_ERROR\";\r\n\r\nexport const UPLOAD_IMAGES_REQUEST = \"postReducer/UPLOAD_IMAGES_REQUEST\";\r\nexport const UPLOAD_IMAGES_SUCCESS = \"postReducer/UPLOAD_IMAGES_SUCCESS\";\r\nexport const UPLOAD_IMAGES_ERROR = \"postReducer/UPLOAD_IMAGES_ERROR\";\r\n\r\nexport const REMOVE_IMAGE = \"postReducer/REMOVE_IMAGE\"\r\n\r\nexport const RETWEET_REQUEST = \"postReducer/RETWEET_REQUEST\";\r\nexport const RETWEET_SUCCESS = \"postReducer/RETWEET_SUCCESS\";\r\nexport const RETWEET_ERROR = \"postReducer/RETWEET_ERROR\";\r\n\r\nexport const addPostRequestAction = data =>({//({postContent})\r\n    type:ADD_POST_REQUEST,\r\n    data,\r\n});\r\n\r\nexport const removePostRequestAction = data =>({//({id})\r\n    type:REMOVE_POST_REQUEST,\r\n    data,\r\n});\r\n\r\nexport const addCommentRequestAction = (data)=>({//({postId,content,userId})\r\n    type:ADD_COMMENT_REQUEST,\r\n    data\r\n})\r\n\r\nconst dummyPost = (data)=> ({//{id,postContent}\r\n    id:data.id,\r\n    content:data.postContent,\r\n    User:{\r\n        id:1,\r\n        nickname:\"zero\"\r\n    },\r\n    Images:getRandomValue(imgs),\r\n    Comments:[],\r\n})\r\n\r\nconst postReducer = (state=initialState,action)=>{\r\n    return produce(state,(draft)=>{\r\n        switch(action.type){\r\n            \r\n            case ADD_POST_REQUEST:\r\n                draft.addPostLoading = true;\r\n                draft.addPostDone = false;\r\n                draft.addPostError = null;\r\n                break;\r\n            case ADD_POST_SUCCESS://data:addPostApi().data\r\n                draft.mainPosts.unshift(action.data);\r\n                draft.addPostLoading = false;\r\n                draft.addPostDone = true;\r\n                draft.imagePaths = [];\r\n                break;\r\n            case ADD_POST_ERROR:\r\n                draft.addPostLoading = false;\r\n                draft.addPostError = action.data;\r\n                break;\r\n\r\n            case REMOVE_POST_REQUEST:\r\n                draft.removePostLoading = true;\r\n                draft.removePostDone = false;\r\n                draft.removePostError = null;\r\n                break;\r\n            case REMOVE_POST_SUCCESS://data:{postId}\r\n                draft.mainPosts = draft.mainPosts.filter(post=>post.id !== action.data.postId);\r\n                draft.removePostLoading = false;\r\n                draft.removePostDone = true;\r\n                break;\r\n            case REMOVE_POST_ERROR:\r\n                draft.removePostLoading = false;\r\n                draft.removePostError = action.data;\r\n                break;\r\n\r\n            case ADD_COMMENT_REQUEST:\r\n                draft.addCommentLoading = true;\r\n                draft.addComentDone = false;\r\n                draft.addCommentError = null;\r\n                break;\r\n            case ADD_COMMENT_SUCCESS:{//data:addCommentApi().data\r\n                const post = draft.mainPosts.find(post=>post.id === action.data.PostId);\r\n                post.Comments.unshift(action.data);\r\n                draft.addCommentLoading = false;\r\n                draft.addCommentDone = true;\r\n                break;\r\n            }\r\n            case ADD_COMMENT_ERROR://{data:err}\r\n                draft.addCommentLoading = false;\r\n                draft.addCommentError = action.data;\r\n                break;\r\n\r\n            case LOAD_POST_REQUEST:\r\n                draft.loadPostLoading = true;\r\n                draft.loadPostDone = false;\r\n                draft.loadPostError = null;\r\n                break;\r\n            case LOAD_POST_SUCCESS://data:loadPostApi().data\r\n                draft.mainPosts = draft.mainPosts.concat(action.data);\r\n                draft.hasMorePosts = draft.mainPosts.length<10;\r\n                draft.loadPostLoading = false;\r\n                draft.loadPostDone = true;\r\n                break;\r\n            case LOAD_POST_ERROR:\r\n                draft.loadPostLoading = false;\r\n                draft.loadPostError = action.data;\r\n                break;\r\n\r\n            case LIKE_POST_REQUEST:\r\n                draft.likePostLoading = true;\r\n                draft.likePostDone = false;\r\n                draft.likePostError = null;\r\n                break;\r\n            case LIKE_POST_SUCCESS:{//{data:{postId,UserId}}\r\n                console.log(\"=========\",draft.mainPosts)\r\n                draft.likePostLoading = false;\r\n                draft.likePostDone = true;\r\n                const post = draft.mainPosts.find(post=>post.id === action.data.postId)\r\n                post.Likers.push({id:action.data.UserId})\r\n                break;\r\n            }\r\n            case LIKE_POST_ERROR:\r\n                draft.likePostLoading = false;\r\n                draft.likePostError = action.data;\r\n                break;\r\n\r\n            case UNLIKE_POST_REQUEST:\r\n                draft.unLikePostLoading = true;\r\n                draft.unLikePostDone = false;\r\n                draft.unLikePostError = null;\r\n                break;\r\n            case UNLIKE_POST_SUCCESS:{//{data:{postId,UserId}}\r\n                draft.unLikePostLoading = false;\r\n                draft.unLikePostDone = true;\r\n                const post = draft.mainPosts.find(post => post.id === action.data.postId);\r\n                post.Likers = post.Likers.filter(user => user.id !== action.data.UserId)\r\n                break;\r\n            }\r\n            case UNLIKE_POST_ERROR:\r\n                draft.unLikePostLoading = false;\r\n                draft.unLikePostError = action.data;\r\n                break;\r\n            \r\n            case UPLOAD_IMAGES_REQUEST:\r\n                draft.upLoadLoading = true;\r\n                draft.upLoadDone = false;\r\n                draft.upLoadError = null;\r\n                break;\r\n            case UPLOAD_IMAGES_SUCCESS: // {data:uploadImagesApi().data}\r\n                draft.imagePaths = action.data\r\n                draft.upLoadLoading = false;\r\n                draft.upLoadDone = true;\r\n                break;\r\n            case UPLOAD_IMAGES_ERROR:\r\n                draft.upLoadLoading = false;\r\n                draft.upLoadError = action.data;\r\n                break;\r\n\r\n            case REMOVE_IMAGE:  // {data:index}\r\n                draft.imagePaths = draft.imagePaths.filter((v,i)=> i !== action.data)\r\n                break;\r\n\r\n            case RETWEET_REQUEST:\r\n                draft.retweetLoading = true;\r\n                draft.retweetDone = false;\r\n                draft.retweetError = null;\r\n                break;\r\n            case RETWEET_SUCCESS: // \r\n                draft.retweetLoading = false;\r\n                draft.retweetDone = true;\r\n                break;\r\n            case RETWEET_ERROR:\r\n                draft.retweetLoading = false;\r\n                draft.retweetError = action.data;\r\n                break;\r\n\r\n            default :\r\n                // return state;\r\n                break;\r\n        }\r\n    })\r\n}\r\n\r\nexport default postReducer;"]},"metadata":{},"sourceType":"module"}