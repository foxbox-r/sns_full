{"ast":null,"code":"import shortId from \"shortid\";\nimport produce from \"immer\";\nimport faker from \"faker\";\nvar initialState = {\n  mainPosts: [],\n  imagePaths: [],\n  addPostDone: false,\n  addPostLoading: false,\n  addPostError: null,\n  loadPostDone: false,\n  loadPostLoading: false,\n  loadPostError: null,\n  hasMorePosts: true,\n  removePostDone: false,\n  removePostLoading: false,\n  removePostError: null,\n  addCommentDone: false,\n  addCommentLoading: false,\n  addCommentError: null,\n  likePostDone: false,\n  likePostLoading: false,\n  likePostError: null,\n  unLikePostDone: false,\n  unLikePostLoading: false,\n  unLikePostError: null\n};\n\nvar getRandomImg = function getRandomImg() {\n  var arr = [];\n  var randomValue = Math.random() * 10 + 1;\n\n  for (var i = 0; i < randomValue; i++) {\n    arr.push({\n      src: faker.image.image()\n    });\n  }\n\n  return arr;\n};\n\nexport var generateDummyPost = function generateDummyPost(number) {\n  return Array(number).fill().map(function (v, i) {\n    return {\n      id: shortId.generate(),\n      User: {\n        id: shortId.generate(),\n        nickname: faker.name.findName()\n      },\n      content: faker.lorem.paragraph(),\n      Images: getRandomImg(),\n      Comments: [{\n        User: {\n          id: shortId.generate(),\n          nickname: faker.name.findName()\n        },\n        content: faker.lorem.sentence()\n      }]\n    };\n  });\n};\ninitialState.mainPosts = initialState.mainPosts.concat(generateDummyPost(0));\nexport var ADD_POST_REQUEST = \"postReducer/ADD_POST_REQUEST\";\nexport var ADD_POST_SUCCESS = \"postReducer/ADD_POST_SUCCESS\";\nexport var ADD_POST_ERROR = \"postReducer/ADD_POST_ERROR\";\nexport var REMOVE_POST_REQUEST = \"postReducer/REMOVE_POST_REQUEST\";\nexport var REMOVE_POST_SUCCESS = \"postReducer/REMOVE_POST_SUCCESS\";\nexport var REMOVE_POST_ERROR = \"postReducer/REMOVE_POST_ERROR\";\nexport var ADD_COMMENT_REQUEST = \"postReducer/ADD_COMMENT_REQUEST\";\nexport var ADD_COMMENT_SUCCESS = \"postReducer/ADD_COMMENT_SUCCESS\";\nexport var ADD_COMMENT_ERROR = \"postReducer/ADD_COMMENT_ERROR\";\nexport var LOAD_POST_REQUEST = \"postReducer/LOAD_POST_REQUEST\";\nexport var LOAD_POST_SUCCESS = \"postReducer/LOAD_POST_SUCCESS\";\nexport var LOAD_POST_ERROR = \"postReducer/LOAD_POST_ERROR\";\nexport var LIKE_POST_REQUEST = \"postReducer/LIKE_POST_REQUEST\";\nexport var LIKE_POST_SUCCESS = \"postReducer/LIKE_POST_SUCCESS\";\nexport var LIKE_POST_ERROR = \"postReducer/LIKE_POST_ERROR\";\nexport var UNLIKE_POST_REQUEST = \"postReducer/UNLIKE_POST_REQUEST\";\nexport var UNLIKE_POST_SUCCESS = \"postReducer/UNLIKE_POST_SUCCESS\";\nexport var UNLIKE_POST_ERROR = \"postReducer/UNLIKE_POST_ERROR\";\nexport var addPostRequestAction = function addPostRequestAction(data) {\n  return {\n    //({postContent})\n    type: ADD_POST_REQUEST,\n    data: data\n  };\n};\nexport var removePostRequestAction = function removePostRequestAction(data) {\n  return {\n    //({id})\n    type: REMOVE_POST_REQUEST,\n    data: data\n  };\n};\nexport var addCommentRequestAction = function addCommentRequestAction(data) {\n  return {\n    //({postId,content,userId})\n    type: ADD_COMMENT_REQUEST,\n    data: data\n  };\n};\n\nvar dummyPost = function dummyPost(data) {\n  return {\n    //{id,postContent}\n    id: data.id,\n    content: data.postContent,\n    User: {\n      id: 1,\n      nickname: \"zero\"\n    },\n    Images: getRandomValue(imgs),\n    Comments: []\n  };\n};\n\nvar postReducer = function postReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  return produce(state, function (draft) {\n    switch (action.type) {\n      case ADD_POST_REQUEST:\n        draft.addPostLoading = true;\n        draft.addPostDone = false;\n        draft.addPostError = null;\n        break;\n\n      case ADD_POST_SUCCESS:\n        //data:addPostApi().data\n        draft.mainPosts.unshift(action.data);\n        draft.addPostLoading = false;\n        draft.addPostDone = true;\n        break;\n\n      case ADD_POST_ERROR:\n        draft.addPostLoading = false;\n        draft.addPostError = action.data;\n        break;\n\n      case REMOVE_POST_REQUEST:\n        draft.removePostLoading = true;\n        draft.removePostDone = false;\n        draft.removePostError = null;\n        break;\n\n      case REMOVE_POST_SUCCESS:\n        //data:{id}\n        draft.mainPosts = draft.mainPosts.filter(function (post) {\n          return post.id !== action.data.id;\n        });\n        draft.removePostLoading = false;\n        draft.removePostDone = true;\n        break;\n\n      case REMOVE_POST_ERROR:\n        draft.removePostLoading = false;\n        draft.removePostError = action.data;\n        break;\n\n      case ADD_COMMENT_REQUEST:\n        draft.addCommentLoading = true;\n        draft.addComentDone = false;\n        draft.addCommentError = null;\n        break;\n\n      case ADD_COMMENT_SUCCESS:\n        {\n          //data:addCommentApi().data\n          var post = draft.mainPosts.find(function (post) {\n            return post.id === action.data.PostId;\n          });\n          post.Comments.unshift(action.data);\n          draft.addCommentLoading = false;\n          draft.addCommentDone = true;\n          break;\n        }\n\n      case ADD_COMMENT_ERROR:\n        //{data:err}\n        draft.addCommentLoading = false;\n        draft.addCommentError = action.data;\n        break;\n\n      case LOAD_POST_REQUEST:\n        draft.loadPostLoading = true;\n        draft.loadPostDone = false;\n        draft.loadPostError = null;\n        break;\n\n      case LOAD_POST_SUCCESS:\n        //data:loadPostApi().data\n        console.log(draft.mainPosts);\n        draft.mainPosts = draft.mainPosts.concat(action.data);\n        draft.hasMorePosts = draft.mainPosts.length < 10;\n        draft.loadPostLoading = false;\n        draft.loadPostDone = true;\n        break;\n\n      case LOAD_POST_ERROR:\n        draft.loadPostLoading = false;\n        draft.loadPostError = action.data;\n        break;\n\n      case LIKE_POST_REQUEST:\n        draft.likePostLoading = true;\n        draft.likePostDone = false;\n        draft.likePostError = null;\n        break;\n\n      case LIKE_POST_SUCCESS:\n        {\n          //{data:{postId,UserId}}\n          draft.likePostLoading = false;\n          draft.likePostDone = true;\n\n          var _post = draft.mainPosts.find(function (post) {\n            return post.id === action.data.postId;\n          });\n\n          _post.Likers.push({\n            id: action.data.UserId\n          });\n\n          break;\n        }\n\n      case LIKE_POST_ERROR:\n        draft.likePostLoading = false;\n        draft.likePostError = action.data;\n        break;\n\n      case UNLIKE_POST_REQUEST:\n        draft.unLikePostLoading = true;\n        draft.unLikePostDone = false;\n        draft.unLikePostError = null;\n        break;\n\n      case UNLIKE_POST_SUCCESS:\n        {\n          //{data:{postId,UserId}}\n          draft.unLikePostLoading = false;\n          draft.unLikePostDone = true;\n\n          var _post2 = draft.mainPosts.find(function (post) {\n            return post.id === action.data.postId;\n          });\n\n          _post2.Likers = _post2.Likers.filter(function (user) {\n            return user.id !== action.data.UserId;\n          });\n          break;\n        }\n\n      case UNLIKE_POST_ERROR:\n        draft.unLikePostLoading = false;\n        draft.unLikePostError = action.data;\n        break;\n\n      default:\n        // return state;\n        break;\n    }\n  });\n};\n\nexport default postReducer;","map":{"version":3,"sources":["C:/WEB/full/front_next/reducers/postReducer.js"],"names":["shortId","produce","faker","initialState","mainPosts","imagePaths","addPostDone","addPostLoading","addPostError","loadPostDone","loadPostLoading","loadPostError","hasMorePosts","removePostDone","removePostLoading","removePostError","addCommentDone","addCommentLoading","addCommentError","likePostDone","likePostLoading","likePostError","unLikePostDone","unLikePostLoading","unLikePostError","getRandomImg","arr","randomValue","Math","random","i","push","src","image","generateDummyPost","number","Array","fill","map","v","id","generate","User","nickname","name","findName","content","lorem","paragraph","Images","Comments","sentence","concat","ADD_POST_REQUEST","ADD_POST_SUCCESS","ADD_POST_ERROR","REMOVE_POST_REQUEST","REMOVE_POST_SUCCESS","REMOVE_POST_ERROR","ADD_COMMENT_REQUEST","ADD_COMMENT_SUCCESS","ADD_COMMENT_ERROR","LOAD_POST_REQUEST","LOAD_POST_SUCCESS","LOAD_POST_ERROR","LIKE_POST_REQUEST","LIKE_POST_SUCCESS","LIKE_POST_ERROR","UNLIKE_POST_REQUEST","UNLIKE_POST_SUCCESS","UNLIKE_POST_ERROR","addPostRequestAction","data","type","removePostRequestAction","addCommentRequestAction","dummyPost","postContent","getRandomValue","imgs","postReducer","state","action","draft","unshift","filter","post","addComentDone","find","PostId","console","log","length","postId","Likers","UserId","user"],"mappings":"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","sourcesContent":["import shortId from \"shortid\"\r\nimport produce from \"immer\"\r\nimport faker from \"faker\"\r\n\r\nconst initialState = {\r\n    mainPosts:[],\r\n    imagePaths:[],\r\n\r\n    addPostDone:false,\r\n    addPostLoading:false,\r\n    addPostError:null,\r\n\r\n    loadPostDone:false,\r\n    loadPostLoading:false,\r\n    loadPostError:null,\r\n    hasMorePosts:true,\r\n\r\n    removePostDone:false,\r\n    removePostLoading:false,\r\n    removePostError:null,\r\n\r\n    addCommentDone:false,\r\n    addCommentLoading:false,\r\n    addCommentError:null,\r\n\r\n    likePostDone:false,\r\n    likePostLoading:false,\r\n    likePostError:null,\r\n\r\n    unLikePostDone:false,\r\n    unLikePostLoading:false,\r\n    unLikePostError:null,\r\n}\r\nconst getRandomImg = ()=>{\r\n    const arr = [];\r\n    const randomValue = Math.random()*10+1;\r\n    for(let i=0;i<randomValue;i++)\r\n        arr.push({\r\n            src:faker.image.image()\r\n        });\r\n    return arr;\r\n};\r\nexport const generateDummyPost = number => Array(number).fill().map((v,i)=>({\r\n    id:shortId.generate(),\r\n    User:{\r\n        id:shortId.generate(),\r\n        nickname:faker.name.findName(),\r\n    },\r\n    content:faker.lorem.paragraph(),\r\n    Images:getRandomImg(),\r\n    Comments:[{\r\n        User:{\r\n            id:shortId.generate(),\r\n            nickname:faker.name.findName()\r\n        },\r\n        content:faker.lorem.sentence(),\r\n    }],\r\n}));\r\n\r\ninitialState.mainPosts = initialState.mainPosts.concat(generateDummyPost(0))\r\n\r\nexport const ADD_POST_REQUEST = \"postReducer/ADD_POST_REQUEST\";\r\nexport const ADD_POST_SUCCESS = \"postReducer/ADD_POST_SUCCESS\";\r\nexport const ADD_POST_ERROR = \"postReducer/ADD_POST_ERROR\";\r\n\r\nexport const REMOVE_POST_REQUEST = \"postReducer/REMOVE_POST_REQUEST\";\r\nexport const REMOVE_POST_SUCCESS = \"postReducer/REMOVE_POST_SUCCESS\";\r\nexport const REMOVE_POST_ERROR = \"postReducer/REMOVE_POST_ERROR\";\r\n\r\nexport const ADD_COMMENT_REQUEST = \"postReducer/ADD_COMMENT_REQUEST\";\r\nexport const ADD_COMMENT_SUCCESS = \"postReducer/ADD_COMMENT_SUCCESS\";\r\nexport const ADD_COMMENT_ERROR = \"postReducer/ADD_COMMENT_ERROR\";\r\n\r\nexport const LOAD_POST_REQUEST = \"postReducer/LOAD_POST_REQUEST\";\r\nexport const LOAD_POST_SUCCESS = \"postReducer/LOAD_POST_SUCCESS\";\r\nexport const LOAD_POST_ERROR = \"postReducer/LOAD_POST_ERROR\";\r\n\r\nexport const LIKE_POST_REQUEST = \"postReducer/LIKE_POST_REQUEST\";\r\nexport const LIKE_POST_SUCCESS = \"postReducer/LIKE_POST_SUCCESS\";\r\nexport const LIKE_POST_ERROR = \"postReducer/LIKE_POST_ERROR\";\r\n\r\nexport const UNLIKE_POST_REQUEST = \"postReducer/UNLIKE_POST_REQUEST\";\r\nexport const UNLIKE_POST_SUCCESS = \"postReducer/UNLIKE_POST_SUCCESS\";\r\nexport const UNLIKE_POST_ERROR = \"postReducer/UNLIKE_POST_ERROR\";\r\n\r\nexport const addPostRequestAction = data =>({//({postContent})\r\n    type:ADD_POST_REQUEST,\r\n    data,\r\n});\r\n\r\nexport const removePostRequestAction = data =>({//({id})\r\n    type:REMOVE_POST_REQUEST,\r\n    data,\r\n});\r\n\r\nexport const addCommentRequestAction = (data)=>({//({postId,content,userId})\r\n    type:ADD_COMMENT_REQUEST,\r\n    data\r\n})\r\n\r\nconst dummyPost = (data)=> ({//{id,postContent}\r\n    id:data.id,\r\n    content:data.postContent,\r\n    User:{\r\n        id:1,\r\n        nickname:\"zero\"\r\n    },\r\n    Images:getRandomValue(imgs),\r\n    Comments:[],\r\n})\r\n\r\nconst postReducer = (state=initialState,action)=>{\r\n    return produce(state,(draft)=>{\r\n        switch(action.type){\r\n            \r\n            case ADD_POST_REQUEST:\r\n                draft.addPostLoading = true;\r\n                draft.addPostDone = false;\r\n                draft.addPostError = null;\r\n                break;\r\n            case ADD_POST_SUCCESS://data:addPostApi().data\r\n                draft.mainPosts.unshift(action.data);\r\n                draft.addPostLoading = false;\r\n                draft.addPostDone = true;\r\n                break;\r\n            case ADD_POST_ERROR:\r\n                draft.addPostLoading = false;\r\n                draft.addPostError = action.data;\r\n                break;\r\n\r\n            case REMOVE_POST_REQUEST:\r\n                draft.removePostLoading = true;\r\n                draft.removePostDone = false;\r\n                draft.removePostError = null;\r\n                break;\r\n            case REMOVE_POST_SUCCESS://data:{id}\r\n                draft.mainPosts = draft.mainPosts.filter(post=>post.id !== action.data.id);\r\n                draft.removePostLoading = false;\r\n                draft.removePostDone = true;\r\n                break;\r\n            case REMOVE_POST_ERROR:\r\n                draft.removePostLoading = false;\r\n                draft.removePostError = action.data;\r\n                break;\r\n\r\n            case ADD_COMMENT_REQUEST:\r\n                draft.addCommentLoading = true;\r\n                draft.addComentDone = false;\r\n                draft.addCommentError = null;\r\n                break;\r\n            case ADD_COMMENT_SUCCESS:{//data:addCommentApi().data\r\n                const post = draft.mainPosts.find(post=>post.id === action.data.PostId);\r\n                post.Comments.unshift(action.data);\r\n                draft.addCommentLoading = false;\r\n                draft.addCommentDone = true;\r\n                break;\r\n            }\r\n            case ADD_COMMENT_ERROR://{data:err}\r\n                draft.addCommentLoading = false;\r\n                draft.addCommentError = action.data;\r\n                break;\r\n\r\n            case LOAD_POST_REQUEST:\r\n                draft.loadPostLoading = true;\r\n                draft.loadPostDone = false;\r\n                draft.loadPostError = null;\r\n                break;\r\n            case LOAD_POST_SUCCESS://data:loadPostApi().data\r\n                console.log(draft.mainPosts);\r\n                draft.mainPosts = draft.mainPosts.concat(action.data);\r\n                draft.hasMorePosts = draft.mainPosts.length<10;\r\n                draft.loadPostLoading = false;\r\n                draft.loadPostDone = true;\r\n                break;\r\n            case LOAD_POST_ERROR:\r\n                draft.loadPostLoading = false;\r\n                draft.loadPostError = action.data;\r\n                break;\r\n\r\n            case LIKE_POST_REQUEST:\r\n                draft.likePostLoading = true;\r\n                draft.likePostDone = false;\r\n                draft.likePostError = null;\r\n                break;\r\n            case LIKE_POST_SUCCESS:{//{data:{postId,UserId}}\r\n                draft.likePostLoading = false;\r\n                draft.likePostDone = true;\r\n                const post = draft.mainPosts.find(post=>post.id === action.data.postId)\r\n                post.Likers.push({id:action.data.UserId})\r\n                break;\r\n            }\r\n            case LIKE_POST_ERROR:\r\n                draft.likePostLoading = false;\r\n                draft.likePostError = action.data;\r\n                break;\r\n\r\n            case UNLIKE_POST_REQUEST:\r\n                draft.unLikePostLoading = true;\r\n                draft.unLikePostDone = false;\r\n                draft.unLikePostError = null;\r\n                break;\r\n            case UNLIKE_POST_SUCCESS:{//{data:{postId,UserId}}\r\n                draft.unLikePostLoading = false;\r\n                draft.unLikePostDone = true;\r\n                const post = draft.mainPosts.find(post => post.id === action.data.postId);\r\n                post.Likers = post.Likers.filter(user => user.id !== action.data.UserId)\r\n                break;\r\n            }\r\n            case UNLIKE_POST_ERROR:\r\n                draft.unLikePostLoading = false;\r\n                draft.unLikePostError = action.data;\r\n                break;\r\n            default :\r\n                // return state;\r\n                break;\r\n        }\r\n    })\r\n}\r\n\r\nexport default postReducer;"]},"metadata":{},"sourceType":"module"}